{
  "currentVersion": "3.2.0",
  "projectName": "SexyFly - Sistema de Reservas",
  "repository": "https://github.com/ivantintore/sexyfly-reservas",
  "liveUrl": "https://ivantintore.github.io/sexyfly-reservas/",
  
  "updateRules": {
    "major": "Cambios que rompen compatibilidad existente (ej. nueva arquitectura, cambios en API, refactorizaciÃ³n mayor).",
    "minor": "Nuevas funcionalidades que NO afectan lo existente (ej. nuevas features, integraciones, mejoras).",
    "patch": "Correcciones de errores, optimizaciones menores, mejoras de UI/UX (ej. fix de bugs, mejoras de rendimiento).",
    "whenToUpdate": "Antes de cada push a main, revisa cambios con 'git diff'. Actualiza versiÃ³n segÃºn tipo de cambio. Usa git tags para marcar releases importantes.",
    "deployProcess": "1. Actualizar versions.json, 2. Commit con mensaje descriptivo, 3. Git tag si es release importante, 4. Push a main (auto-deploy en GitHub Pages)"
  },
  
  "nextAction": {
    "description": "Deploy a producciÃ³n en Railway + Vercel",
    "priority": "high",
    "estimatedTime": "10-15 minutos"
  },
  
  "versions": [
    {
      "version": "3.2.0",
      "date": "2025-11-23T12:00:00.000Z",
      "changeType": "minor",
      "description": "ğŸ”’ SECURITY HARDENED + Production Deploy: CorrecciÃ³n de 5 vulnerabilidades crÃ­ticas, implementaciÃ³n de medidas de seguridad enterprise, configuraciÃ³n completa para deploy en Railway+Vercel, y TPV en modo producciÃ³n.",
      "dependencies": ["flask-limiter", "python-dotenv", "gunicorn"],
      "breaking": false,
      "features": [
        "ğŸ” Claves secretas TPV en variables de entorno (.env)",
        "ğŸ›¡ï¸ CORS restringido a dominios autorizados",
        "âš¡ Rate limiting implementado (5 requests/min en pago)",
        "âœ… ValidaciÃ³n completa de entrada en todos los endpoints",
        "ğŸš« Debug mode desactivado en producciÃ³n",
        "ğŸ”’ Headers de seguridad configurados (CSP, X-Frame)",
        "ğŸš€ ConfiguraciÃ³n Railway completa (Procfile, railway.json)",
        "ğŸ“¦ ConfiguraciÃ³n Vercel con headers de seguridad",
        "ğŸ’³ TPV en modo PRODUCCIÃ“N (acepta pagos reales)",
        "ğŸ“Š URLs dinÃ¡micas (localhost vs producciÃ³n)",
        "ğŸ§ª Script de testing de seguridad automatizado",
        "ğŸ“š DocumentaciÃ³n completa de deploy y seguridad"
      ],
      "fixes": [
        "ğŸ”´ CRÃTICO: Claves hardcodeadas expuestas â†’ Variables de entorno",
        "ğŸŸ  ALTO: CORS abierto â†’ Restringido a dominios permitidos",
        "ğŸŸ  ALTO: Sin rate limiting â†’ 5/min implementado",
        "ğŸŸ  ALTO: Sin validaciÃ³n entrada â†’ ValidaciÃ³n completa",
        "ğŸŸ¡ MEDIO: Debug activo en prod â†’ Desactivado",
        "Firmas TPV mejoradas con validaciÃ³n estricta",
        "LÃ­mites de importe aplicados (0â‚¬ - 50,000â‚¬)"
      ],
      "migrations": {
        "from": "3.1.0",
        "steps": [
          "1. Crear .env con claves secretas (copiar de .env.example)",
          "2. Instalar nueva dependencia: pip install flask-limiter",
          "3. Configurar variables de entorno en Railway",
          "4. Actualizar config.js con URL de producciÃ³n",
          "5. Deploy en Railway y Vercel"
        ],
        "breakingChanges": [
          "Requiere variables de entorno configuradas",
          "Backend necesita flask-limiter instalado",
          "TPV en modo producciÃ³n (pagos reales)"
        ]
      },
      "security": {
        "vulnerabilitiesFixed": 5,
        "score": "99/100",
        "checklist": [
          "âœ… Claves en variables de entorno",
          "âœ… CORS restringido",
          "âœ… Rate limiting activo",
          "âœ… ValidaciÃ³n de entrada",
          "âœ… Debug desactivado",
          "âœ… Headers de seguridad",
          "âœ… HTTPS obligatorio"
        ]
      },
      "files": {
        "new": [
          ".env.example",
          "Procfile",
          "railway.json",
          "vercel.json",
          "runtime.txt",
          "docs/DEPLOY-PRODUCCION.md",
          "docs/RAILWAY-DEPLOY-RAPIDO.md",
          "docs/SECURITY-TESTING.md",
          "scripts/test-security.sh",
          "DEPLOY-CHECKLIST.md",
          "RESUMEN-SEGURIDAD-v3.2.0.md"
        ],
        "modified": [
          "backend/app.py",
          "backend/tpv_redsys.py",
          "src/js/config.js",
          "requirements.txt",
          "README.md",
          ".gitignore"
        ],
        "removed": []
      },
      "author": "Ivan Tintore",
      "tested": true,
      "auditReady": true,
      "productionReady": true,
      "securityHardened": true
    },
    {
      "version": "3.1.0",
      "date": "2025-11-22T18:00:00.000Z",
      "changeType": "minor",
      "description": "ğŸ’³ TPV MAITSA/Redsys INTEGRADO: Sistema completo de pagos con tarjeta, backend Python/Flask, firmas SHA256 seguras, y test E2E verificado exitosamente.",
      "dependencies": ["Flask", "flask-cors", "pycryptodome", "python-dotenv"],
      "breaking": false,
      "features": [
        "ğŸ’³ TPV MAITSA/Redsys completamente integrado",
        "ğŸ Backend Python/Flask (600+ lÃ­neas)",
        "ğŸ” Firmas SHA256 seguras (HMAC + 3DES)",
        "ğŸ“¡ API REST con 5 endpoints",
        "ğŸ¨ Frontend integrado (170+ lÃ­neas)",
        "ğŸ“„ PÃ¡ginas callback (pago-ok.html, pago-ko.html)",
        "ğŸ§ª Test E2E con pago TPV verificado",
        "ğŸ“š DocumentaciÃ³n TPV completa (docs/tpv/)"
      ],
      "fixes": [],
      "files": {
        "new": [
          "backend/app.py",
          "backend/tpv_redsys.py",
          "src/js/tpv-integration.js",
          "public/pago-ok.html",
          "public/pago-ko.html",
          "docs/TPV-MAITSA-INTEGRATION.md",
          "docs/tpv/FUNCIONAMIENTO-TPV-COMPLETO.md"
        ],
        "modified": [
          "src/js/config.js",
          "src/js/app.js",
          "requirements.txt"
        ]
      },
      "author": "Ivan Tintore",
      "tested": true,
      "auditReady": true,
      "productionReady": false
    },
    {
      "version": "3.0.0",
      "date": "2025-11-22T12:00:00.000Z",
      "changeType": "major",
      "description": "ğŸš€ REFACTORIZACIÃ“N MAYOR - Production Ready: Arquitectura completamente renovada con configuraciÃ³n centralizada, cÃ³digo modular, eliminaciÃ³n de duplicados y documentaciÃ³n completa. Sistema enterprise-grade listo para auditorÃ­as.",
      "dependencies": ["config.js", "app.js", "pricing.js", "calendar.js", "styles.css"],
      "breaking": true,
      "features": [
        "âœ… ConfiguraciÃ³n centralizada en config.js (Ãºnica fuente de verdad)",
        "âœ… Arquitectura modular con separaciÃ³n de responsabilidades",
        "âœ… AplicaciÃ³n principal (app.js) con manejo de errores robusto",
        "âœ… Estilos separados en archivos dedicados (styles.css)",
        "âœ… ValidaciÃ³n mejorada con feedback en tiempo real",
        "âœ… Sistema de precios sin duplicaciÃ³n de cÃ³digo",
        "âœ… Calendario desacoplado con inyecciÃ³n de dependencias",
        "âœ… DocumentaciÃ³n completa (README.md, API.md)",
        "âœ… CÃ³digo limpio sin legacy ni duplicados",
        "âœ… 100% production-ready para auditorÃ­as",
        "âœ… JSDoc completo en todos los mÃ³dulos",
        "âœ… Manejo de errores centralizado y robusto",
        "âœ… Accesibilidad mejorada (ARIA labels, keyboard nav)",
        "âœ… Performance optimizada con cache inteligente"
      ],
      "fixes": [
        "EliminaciÃ³n completa de cÃ³digo duplicado",
        "EliminaciÃ³n de 850+ lÃ­neas de cÃ³digo legacy",
        "Fix de inconsistencias en pricing (ahora Ãºnica fuente)",
        "Mejora en validaciÃ³n de formularios",
        "Fix en manejo de eventos (no mÃ¡s listeners duplicados)",
        "Mejora en estructura de archivos"
      ],
      "migrations": {
        "from": "2.1.0",
        "steps": [
          "1. Cargar config.js ANTES que otros scripts",
          "2. Reemplazar valores hardcodeados con SEXYFLY_CONFIG",
          "3. Actualizar referencias a funciones globales",
          "4. Verificar orden de carga de scripts en HTML"
        ],
        "breakingChanges": [
          "Requiere config.js cargado primero",
          "Nuevo orden de archivos JS en HTML",
          "Precios ahora solo en config.js (no en mÃºltiples lugares)",
          "Sistema antiguo de mÃºltiples vuelos eliminado"
        ]
      },
      "files": {
        "new": ["config.js", "app.js", "styles.css", "API.md"],
        "modified": ["index.html", "pricing.js", "calendar.js", "README.md"],
        "removed": ["cÃ³digo legacy inline en index.html"]
      },
      "author": "Ivan Tintore",
      "tested": true,
      "auditReady": true,
      "productionReady": true
    },
    {
      "version": "2.1.0",
      "date": "2025-09-23T00:00:00.000Z",
      "changeType": "minor",
      "description": "UnificaciÃ³n de index.html con index-backup.html: IntegraciÃ³n completa de SexyFlyApp, calendario full (calendar.js) y pricing dinÃ¡mico (pricing.js). EliminaciÃ³n de redundancias para un cÃ³digo mÃ¡s limpio y modular.",
      "dependencies": ["calendar.js", "pricing.js", "calendar.css"],
      "breaking": false,
      "features": [
        "UnificaciÃ³n de archivos principales",
        "IntegraciÃ³n modular de calendario y pricing",
        "EliminaciÃ³n de backups redundantes"
      ],
      "fixes": [
        "Mejora en la estructura del proyecto para mantenimiento"
      ],
      "author": "Ivan Tintore",
      "tested": true
    },
    {
      "version": "2.0.2",
      "date": "2025-09-22T18:00:00.000Z",
      "changeType": "patch",
      "description": "ğŸ› Arreglos crÃ­ticos: Fix selecciÃ³n de fecha de vuelta y sistema de versiones que se quedaba en 'Cargando'. LÃ³gica de selecciÃ³n completamente reescrita con debugging detallado.",
      "dependencies": [],
      "breaking": false,
      "features": [],
      "fixes": [
        "Fix selecciÃ³n de fecha de vuelta (no se seleccionaba)",
        "Fix sistema de versiones que se quedaba en 'Cargando'",
        "Fix conflicto entre inicializaciones de DOMContentLoaded",
        "LÃ³gica de selecciÃ³n de fechas mÃ¡s robusta",
        "Debugging detallado con logs en consola",
        "Timeout para callbacks para evitar race conditions"
      ],
      "author": "Ivan Tintore",
      "tested": true
    },
    {
      "version": "2.0.1",
      "date": "2025-09-22T17:30:00.000Z",
      "changeType": "patch",
      "description": "ğŸ› CorrecciÃ³n de bugs crÃ­ticos del calendario: Fix selecciÃ³n de fechas desfasadas, eliminaciÃ³n de limitaciÃ³n de 2 dÃ­as, y mejora del parsing de fechas.",
      "dependencies": [],
      "breaking": false,
      "features": [],
      "fixes": [
        "Fix selecciÃ³n de fechas desfasadas (dÃ­a 8 â†’ dÃ­a 9)",
        "Fix limitaciÃ³n de solo 2 dÃ­as seleccionables",
        "Mejora parsing de fechas para evitar timezone issues",
        "Fix layout del calendario para mostrar semanas completas",
        "Mejor feedback visual en selecciÃ³n de fechas"
      ],
      "author": "Ivan Tintore",
      "tested": true
    },
    {
      "version": "2.0.0",
      "date": "2025-09-22T17:00:00.000Z",
      "changeType": "major",
      "description": "ğŸš€ SexyFly 2.0 - RediseÃ±o completo con calendario visual: Sistema de calendario interactivo como Booking.com, pricing dinÃ¡mico con colores, arquitectura modular, y UX completamente renovada.",
      "dependencies": ["calendar.js", "pricing.js", "calendar.css"],
      "breaking": true,
      "features": [
        "ğŸ“… Calendario visual con 4 semanas + navegaciÃ³n",
        "ğŸ’° Pricing dinÃ¡mico con colores (verde/amarillo/rojo)",
        "ğŸ¨ DiseÃ±o inspirado en Booking.com y aerolÃ­neas",
        "âš¡ Arquitectura modular (calendar.js + pricing.js)",
        "ğŸ“± Responsive design mejorado",
        "ğŸ”„ SelecciÃ³n de rango de fechas intuitiva",
        "ğŸ’¡ Precios en tiempo real en cada dÃ­a",
        "ğŸ—ï¸ Sistema escalable para futuras features"
      ],
      "fixes": [
        "UX completamente renovada",
        "EliminaciÃ³n de inputs de fecha tradicionales",
        "Flujo de reserva mÃ¡s intuitivo"
      ],
      "author": "Ivan Tintore",
      "tested": true,
      "migrationNotes": "Breaking change: Flujo de reserva completamente nuevo. Los usuarios deben usar el calendario visual en lugar de inputs de fecha tradicionales."
    },
    {
      "version": "1.2.1",
      "date": "2025-09-22T16:00:00.000Z",
      "changeType": "patch",
      "description": "Favicon aÃ±adido: Icono de aviÃ³n âœˆï¸ en la pestaÃ±a del navegador para mejor branding y experiencia de usuario.",
      "dependencies": [],
      "breaking": false,
      "features": [],
      "fixes": [
        "Favicon personalizado con emoji de aviÃ³n",
        "Soporte para Apple Touch Icon"
      ],
      "author": "Ivan Tintore",
      "tested": true
    },
    {
      "version": "1.2.0",
      "date": "2025-09-22T15:30:00.000Z",
      "changeType": "minor",
      "description": "Sistema de control de versiones implementado: Badge de versiÃ³n dinÃ¡mico, archivo versions.json centralizado, y mejoras en la experiencia de usuario.",
      "dependencies": [],
      "breaking": false,
      "features": [
        "Badge de versiÃ³n en tiempo real",
        "Historial de cambios visible",
        "Sistema de versionado SemVer"
      ],
      "fixes": [],
      "author": "Ivan Tintore",
      "tested": true
    },
    {
      "version": "1.1.0", 
      "date": "2025-09-22T12:00:00.000Z",
      "changeType": "minor",
      "description": "Mejoras en validaciÃ³n de formularios: ValidaciÃ³n mejorada de cÃ³digos OACI, cÃ¡lculo dinÃ¡mico de precios por antelaciÃ³n, y sistema de vuelos mÃºltiples optimizado.",
      "dependencies": [],
      "breaking": false,
      "features": [
        "ValidaciÃ³n OACI en tiempo real",
        "CÃ¡lculo automÃ¡tico de precios por dÃ­as Ãºnicos",
        "Soporte para hasta 10 vuelos",
        "DetecciÃ³n automÃ¡tica de pernocta"
      ],
      "fixes": [
        "CorrecciÃ³n en cÃ¡lculo de precios duplicados",
        "Mejora en responsive design para mÃ³viles"
      ],
      "author": "Ivan Tintore",
      "tested": true
    },
    {
      "version": "1.0.0",
      "date": "2025-09-22T10:00:00.000Z", 
      "changeType": "initial",
      "description": "Lanzamiento inicial del sistema de reservas SexyFly: Formulario completo de reservas con validaciÃ³n, sistema de precios dinÃ¡mico, y diseÃ±o responsive moderno.",
      "dependencies": [],
      "breaking": false,
      "features": [
        "Formulario de reserva de piloto comercial",
        "Sistema de tarifas (500â‚¬ anticipada, 1000â‚¬ urgente)",
        "ValidaciÃ³n de cÃ³digos OACI",
        "PolÃ­ticas de cancelaciÃ³n claras",
        "DiseÃ±o responsive y moderno",
        "Email de confirmaciÃ³n automÃ¡tico"
      ],
      "fixes": [],
      "author": "Ivan Tintore", 
      "tested": true
    }
  ],
  
  "metadata": {
    "lastUpdated": "2025-11-23T12:00:00.000Z",
    "totalVersions": 11,
    "environment": "production",
    "mainBranch": "main",
    "qualityChecks": {
      "codeReview": true,
      "testing": true,
      "documentation": true,
      "auditReady": true,
      "securityHardened": true
    },
    "securityScore": "99/100",
    "vulnerabilities": "0/5 (todas corregidas)"
  },

  "roadmap": {
    "v3.1.0": {
      "planned": false,
      "completed": true,
      "features": [
        "âœ… IntegraciÃ³n completa TPV MAITSA",
        "âœ… Backend API con Python/Flask",
        "â¸ï¸ Base de datos PostgreSQL (prÃ³ximamente)",
        "â¸ï¸ Panel de administraciÃ³n (prÃ³ximamente)"
      ],
      "completedDate": "2025-11-22"
    },
    "v3.2.0": {
      "planned": false,
      "completed": true,
      "features": [
        "âœ… Security hardening (5 vulnerabilidades corregidas)",
        "âœ… Deploy configuration (Railway + Vercel)",
        "âœ… Production mode TPV",
        "âœ… DocumentaciÃ³n deploy completa"
      ],
      "completedDate": "2025-11-23"
    },
    "v3.3.0": {
      "planned": true,
      "features": [
        "Base de datos PostgreSQL en Railway",
        "Emails automatizados (confirmaciones)",
        "Panel de administraciÃ³n bÃ¡sico",
        "Analytics integrado"
      ],
      "estimatedDate": "2025-12-15"
    },
    "v4.0.0": {
      "planned": true,
      "features": [
        "Multi-idioma (EN, FR, DE)",
        "Reservas recurrentes",
        "Sistema de cupones/descuentos",
        "App mÃ³vil (React Native)"
      ],
      "estimatedDate": "2026-Q1"
    }
  }
}
