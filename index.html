<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sistema de reservas profesional para servicios de piloto comercial - SexyFly">
    <meta name="keywords" content="piloto comercial, reservas, aviaci√≥n, SexyFly">
    <meta name="author" content="Ivan Tintore">
    
    <!-- CACHE BUSTING -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <title>Reserva de Piloto Comercial - SexyFly</title>
    
    <!-- Favicon - Icono de avi√≥n -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚úàÔ∏è</text></svg>" type="image/svg+xml">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚úàÔ∏è</text></svg>">
    
    <!-- Estilos con cache busting -->
    <link rel="stylesheet" href="calendar.css?v=3.0.0">
    <link rel="stylesheet" href="styles.css?v=3.0.0">
</head>
<body>
    <!-- Badge de Versi√≥n -->
    <div id="version-badge" class="version-badge" role="button" tabindex="0" aria-label="Ver historial de versiones">
        <span id="version-text">Cargando...</span>
        <div id="version-dropdown" class="version-dropdown" role="tooltip">
            <div class="version-dropdown-header">
                <h4>Historial de Versiones</h4>
                <p>SexyFly - Sistema de Reservas</p>
            </div>
            <div id="version-list" class="version-list">
                <div class="version-loading">Cargando versiones...</div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>‚úàÔ∏è Reserva de Piloto Comercial</h1>
            <p>Servicio profesional de piloto comercial - SexyFly.es</p>
        </div>

        <!-- Tarjeta de Reserva Principal -->
        <div class="booking-card">
            <!-- Informaci√≥n de Precios -->
            <div class="pricing-info">
                <h2>üí∞ Tarifas de Reserva</h2>
                <div class="pricing-grid">
                    <div class="price-item">
                        <h3>Reserva Anticipada</h3>
                        <div class="price" id="priceAnticipada">500‚Ç¨</div>
                        <p>+7 d√≠as de antelaci√≥n / d√≠a</p>
                    </div>
                    <div class="price-item">
                        <h3>Reserva Urgente</h3>
                        <div class="price" id="priceUrgente">1,000‚Ç¨</div>
                        <p>24-48 horas / d√≠a</p>
                    </div>
                </div>
            </div>

            <!-- Formulario de Reserva -->
            <form id="bookingForm" novalidate data-sexyfly-form="true">
                <!-- Sistema de Calendario -->
                <div class="calendar-section">
                    <div id="flightCalendar"></div>
                </div>

                <!-- Secci√≥n de detalles de vuelo (oculta inicialmente) -->
                <div class="flight-details-section" id="flightDetailsSection" style="display: none;">
                    <h3 style="color: #1E40AF; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        ‚úàÔ∏è Detalles del Vuelo
                    </h3>
                    
                    <div class="form-row">
                        <div>
                            <label for="departureTime">üõ´ Hora de Salida <span style="color: red;">*</span></label>
                            <input type="time" id="departureTime" name="departureTime">
                        </div>
                        <div>
                            <label for="returnTime">üõ¨ Hora de Regreso <span style="color: red;">*</span></label>
                            <input type="time" id="returnTime" name="returnTime">
                        </div>
                    </div>

                    <div class="form-row">
                        <div>
                            <label for="originICAO">üõ´ Aeropuerto de Origen (OACI) <span style="color: red;">*</span></label>
                            <input 
                                type="text" 
                                id="originICAO" 
                                name="originICAO" 
                                placeholder="Ej: LELL (Lleida)" 
                                maxlength="4" 
                                class="icao-input"
                                pattern="[A-Z]{4}"
                                aria-describedby="originICAOHelp">
                            <div class="icao-helper" id="originICAOHelp">C√≥digo OACI de 4 letras</div>
                        </div>
                        <div>
                            <label for="destinationICAO">üõ¨ Aeropuerto de Destino (OACI) <span style="color: red;">*</span></label>
                            <input 
                                type="text" 
                                id="destinationICAO" 
                                name="destinationICAO" 
                                placeholder="Ej: LEBL (Barcelona)" 
                                maxlength="4" 
                                class="icao-input"
                                pattern="[A-Z]{4}"
                                aria-describedby="destinationICAOHelp">
                            <div class="icao-helper" id="destinationICAOHelp">C√≥digo OACI de 4 letras</div>
                        </div>
                    </div>
                </div>

                <!-- Secci√≥n de pernocta (oculta inicialmente) -->
                <div class="form-group" id="overnightSection" style="display: none;">
                    <label for="overnight">üè® ¬øRequiere pernocta en destino?</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="overnight" name="overnight">
                        <label for="overnight">S√≠, requiero alojamiento (gastos incluidos)</label>
                    </div>
                </div>

                <!-- Datos del Cliente -->
                <div class="form-group">
                    <label for="clientName">üë§ Nombre del Cliente</label>
                    <input 
                        type="text" 
                        id="clientName" 
                        name="clientName" 
                        placeholder="Nombre completo" 
                        required
                        minlength="3"
                        maxlength="100">
                </div>

                <div class="form-group">
                    <div class="form-row">
                        <div>
                            <label for="clientEmail">üìß Email de Contacto</label>
                            <input 
                                type="email" 
                                id="clientEmail" 
                                name="clientEmail" 
                                placeholder="email@ejemplo.com" 
                                required>
                        </div>
                        <div>
                            <label for="clientPhone">üì± Tel√©fono</label>
                            <input 
                                type="tel" 
                                id="clientPhone" 
                                name="clientPhone" 
                                placeholder="+34 600 000 000" 
                                required
                                pattern="(\+34|0034|34)?[ -]?[6-9]\d{2}[ -]?\d{3}[ -]?\d{3}">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="additionalInfo">üìù Informaci√≥n Adicional</label>
                    <textarea 
                        id="additionalInfo" 
                        name="additionalInfo" 
                        rows="4" 
                        placeholder="Detalles adicionales del vuelo, pasajeros, equipaje, etc."
                        maxlength="500"></textarea>
                </div>

                <!-- Resumen de Precios -->
                <div class="total-flights" id="totalFlights" style="display: none;">
                    <h3 id="totalFlightsPrice">Selecciona fechas para ver el precio</h3>
                    <div class="breakdown" id="totalBreakdown">El precio se calcular√° autom√°ticamente</div>
                </div>

                <!-- T√©rminos y Condiciones -->
                <div class="form-group">
                    <div class="checkbox-group" style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #e9ecef;">
                        <input type="checkbox" id="acceptTerms" name="acceptTerms" required style="transform: scale(1.3); margin-right: 15px;">
                        <label for="acceptTerms" style="color: #374151; font-weight: 600; cursor: pointer;">
                            ‚úÖ Acepto los <a href="#terms" style="color: #1E40AF; text-decoration: none; font-weight: bold;" onclick="scrollToTerms()">t√©rminos y condiciones</a> de reserva y las pol√≠ticas de cancelaci√≥n
                        </label>
                    </div>
                </div>

                <!-- Loading Indicator -->
                <div class="loading" id="loadingDiv">
                    <div class="spinner"></div>
                    <p>Procesando reserva...</p>
                </div>

                <!-- Bot√≥n de Submit -->
                <button type="submit" class="btn-primary" id="submitBtn">
                    üöÅ Reservar Piloto - Pagar Ahora
                </button>
            </form>
        </div>

        <!-- T√©rminos y Condiciones -->
        <div class="terms-section" id="terms">
            <h3>üìã T√©rminos y Condiciones</h3>
            <ul class="terms-list">
                <li>El piloto comercial cuenta con todas las licencias y certificaciones requeridas</li>
                <li>Los precios incluyen los servicios del piloto para el d√≠a completo</li>
                <li>En caso de pernocta, todos los gastos de desplazamiento y hotel corren por cuenta del cliente</li>
                <li>Los vuelos est√°n sujetos a condiciones meteorol√≥gicas y operacionales</li>
                <li>El cliente debe proporcionar toda la documentaci√≥n necesaria para el vuelo</li>
                <li>Se requiere seguro de aeronave v√°lido y documentaci√≥n en regla</li>
            </ul>

            <div class="cancellation-policy">
                <h3>‚ùå Pol√≠tica de Cancelaci√≥n</h3>
                <div class="policy-item">
                    <span>Cancelaci√≥n con +4 d√≠as</span>
                    <strong>GRATUITA</strong>
                </div>
                <div class="policy-item">
                    <span>Cancelaci√≥n 2-4 d√≠as antes</span>
                    <strong>50% del importe</strong>
                </div>
                <div class="policy-item">
                    <span>Cancelaci√≥n <48 horas</span>
                    <strong>100% del importe</strong>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts - ORDEN IMPORTANTE - CON CACHE BUSTING -->
    <!-- 1. Configuraci√≥n (primero siempre) -->
    <script src="config.js?v=3.0.0"></script>
    
    <!-- 2. M√≥dulos de sistema -->
    <script src="pricing.js?v=3.0.0"></script>
    <script src="calendar.js?v=3.0.0"></script>
    
    <!-- 3. Aplicaci√≥n principal -->
    <script src="app.js?v=3.0.0"></script>
</body>
</html>
